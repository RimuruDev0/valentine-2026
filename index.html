<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine cho vk iu❤️</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Arial', sans-serif; }
        canvas { display: block; }
        #question-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95); z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; color: white; transition: opacity 0.5s;
        }
        .btn-container { margin-top: 30px; display: flex; gap: 20px; align-items: center; justify-content: center; min-height: 150px; }
        button { padding: 15px 30px; font-size: 18px; cursor: pointer; border: none; border-radius: 10px; transition: all 0.2s ease; font-weight: bold; }
        #btn-yes { background: #ff4d4d; color: white; box-shadow: 0 0 20px #ff4d4d; }
        #btn-no { background: #555; color: white; }
        .message {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #ff5e99; font-size: 28px; text-shadow: 0 0 15px #ff5e99;
            pointer-events: none; text-align: center; width: 100%; display: none; z-index: 10;
        }
        .running-text {
            position: fixed; white-space: nowrap; color: rgba(255, 94, 153, 0.3);
            font-size: 20px; font-style: italic; pointer-events: none; z-index: 1; display: none;
        }
        @keyframes marquee { from { transform: translateX(100%); } to { transform: translateX(-100%); } }
    </style>
</head>
<body>

    <div id="question-overlay">
        <h1 id="question-text">vk iu có muốn nhận quà valentine này của a hong:3?</h1>
        <div class="btn-container">
            <button id="btn-yes">CÓ</button>
            <button id="btn-no">hong</button>
        </div>
    </div>

    <div class="running-text" style="top: 10%; animation: marquee 15s linear infinite;">Love you to the moon and back ❤️</div>
    <div class="running-text" style="top: 30%; animation: marquee 20s linear infinite reverse;">Valentine ngọt ngào ❤️ Love Forever</div>
    <div class="running-text" style="top: 70%; animation: marquee 18s linear infinite;">Em là điều tuyệt vời nhất ❤️</div>
    <div class="running-text" style="top: 85%; animation: marquee 25s linear infinite reverse;">Thương em rất nhiều ❤️</div>

    <div class="message" id="textMsg">Happy Valentine's Day! <br> Chúc vk iu một ngày thật ngọt ngào ❤️</div>
    <canvas id="heart"></canvas>

    <audio id="mySong">
        <source src="nhac.mp3" type="audio/mpeg">
    </audio>

    <script>
        const canvas = document.getElementById('heart');
        const ctx = canvas.getContext('2d');
        const song = document.getElementById('mySong');
        const msg = document.getElementById('textMsg');
        const overlay = document.getElementById('question-overlay');
        const btnYes = document.getElementById('btn-yes');
        const btnNo = document.getElementById('btn-no');
        const runTexts = document.querySelectorAll('.running-text');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let noClickCount = 0;
        let yesScale = 1;

        btnNo.addEventListener('click', () => {
            noClickCount++;
            if (noClickCount < 3) {
                yesScale += 0.8;
                btnYes.style.transform = `scale(${yesScale})`;
                const x = Math.random() * (window.innerWidth - btnNo.offsetWidth);
                const y = Math.random() * (window.innerHeight - btnNo.offsetHeight);
                btnNo.style.position = 'fixed';
                btnNo.style.left = x + 'px';
                btnNo.style.top = y + 'px';
            } else {
                btnNo.style.display = 'none';
                btnYes.style.transform = `scale(${yesScale + 1.5})`;
            }
        });

        btnYes.addEventListener('click', startEverything);

        function getHeartPoint(t) {
            return {
                x: 16 * Math.pow(Math.sin(t), 3),
                y: -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t))
            };
        }

        class Particle {
            constructor(isExplosion = false) {
                this.t = Math.random() * Math.PI * 2;
                const point = getHeartPoint(this.t);
                this.isExplosion = isExplosion;
                
                if (isExplosion) {
                    this.x = 0; this.y = 0;
                    const force = Math.random() * 20 + 10;
                    this.vx = (point.x / 10) * force;
                    this.vy = (point.y / 10) * force;
                    this.life = 1.0;
                } else {
                    this.x = point.x * 12;
                    this.y = point.y * 12;
                }
                
                this.size = Math.random() * 2 + 2;
                this.speed = Math.random() * 0.02 + 0.005;
                this.opacity = Math.random();
            }

            update() {
                if (this.isExplosion) {
                    this.x += this.vx; this.y += this.vy;
                    this.vx *= 0.92; this.vy *= 0.92;
                    this.life -= 0.01;
                    if (this.life <= 0) this.isExplosion = false;
                } else {
                    const factor = 1 + 0.15 * Math.sin(Date.now() * 0.002);
                    const point = getHeartPoint(this.t);
                    this.x = point.x * 12 * factor;
                    this.y = point.y * 12 * factor;
                    this.t += this.speed;
                }
            }

            draw() {
                ctx.fillStyle = `rgba(255, 94, 153, ${this.isExplosion ? this.life : this.opacity})`;
                ctx.beginPath();
                ctx.arc(canvas.width/2 + this.x, canvas.height/2 + this.y, this.size, 0, Math.PI*2);
                ctx.fill();
            }
        }

        const particles = [];
        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animate);
        }

        function startEverything() {
            overlay.style.opacity = '0';
            setTimeout(() => {
                overlay.style.display = 'none';
                msg.style.display = 'block';
                runTexts.forEach(t => t.style.display = 'block');
            }, 500);
            song.play();
            for (let i = 0; i < 450; i++) particles.push(new Particle(true));
            animate();
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
